(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,a,t){e.exports=t(94)},42:function(e,a,t){},94:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(33),o=t.n(i),l=(t(42),t(9)),s=t(3),c=t(4),u=t(7),d=t(5),h=t(8),m=t(6),p=t.n(m),v=t(12),f=t(36);t(92);function g(){return(g=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var b=function(e){return r.a.createElement("svg",g({xmlnsXlink:"http://www.w3.org/1999/xlink",width:"16pt",height:"16pt",viewBox:"0 0 16 16",version:1.1},e),r.a.createElement("g",{id:"surface1"},r.a.createElement("path",{style:{stroke:"none",fillRule:"evenodd",fillOpacity:1},d:"M 3.820312 1.609375 C 3 1.824219 2.328125 2.703125 1.671875 4.414062 C 1.507812 4.828125 1.070312 6.0625 1.082031 6.070312 C 1.109375 6.101562 2.039062 6.417969 2.054688 6.402344 C 2.0625 6.390625 2.160156 6.125 2.269531 5.8125 C 3.3125 2.835938 4.078125 1.984375 4.765625 3.039062 C 5.109375 3.570312 5.332031 4.328125 5.757812 6.445312 C 6.195312 8.613281 6.429688 9.359375 6.878906 10.058594 C 7.566406 11.125 8.753906 11.234375 9.609375 10.320312 C 10.09375 9.796875 10.488281 9.027344 11.023438 7.542969 C 11.109375 7.296875 11.238281 6.945312 11.304688 6.765625 C 11.367188 6.582031 11.421875 6.433594 11.417969 6.429688 C 11.367188 6.394531 10.460938 6.078125 10.449219 6.09375 C 10.4375 6.105469 10.308594 6.453125 10.160156 6.859375 C 9.277344 9.328125 8.730469 10.125 8.117188 9.84375 C 7.589844 9.601562 7.289062 8.753906 6.714844 5.933594 C 6.28125 3.773438 6 2.933594 5.507812 2.273438 C 5.078125 1.707031 4.429688 1.453125 3.820312 1.609375 "})))};t.p;function w(){return(w=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var C=function(e){return r.a.createElement("svg",w({xmlnsXlink:"http://www.w3.org/1999/xlink",width:"16pt",height:"16pt",viewBox:"0 0 16 16",version:1.1},e),r.a.createElement("g",{id:"surface1"},r.a.createElement("path",{style:{stroke:"none",fillRule:"evenodd",fillOpacity:1},d:"M 4.09375 1.734375 C 3.734375 2.296875 1.140625 6.460938 1.140625 6.476562 C 1.132812 6.5 1.945312 7.027344 1.992188 7.03125 C 2.003906 7.03125 2.492188 6.265625 3.074219 5.335938 C 3.65625 4.398438 4.140625 3.640625 4.148438 3.640625 C 4.15625 3.640625 5.09375 5.265625 6.226562 7.253906 C 7.359375 9.242188 8.296875 10.867188 8.3125 10.871094 C 8.355469 10.882812 11.375 6.019531 11.34375 5.992188 C 11.304688 5.953125 10.527344 5.46875 10.503906 5.46875 C 10.492188 5.46875 10.007812 6.234375 9.425781 7.164062 C 8.84375 8.101562 8.359375 8.859375 8.351562 8.859375 C 8.34375 8.859375 7.414062 7.246094 6.289062 5.273438 C 3.886719 1.0625 4.203125 1.570312 4.09375 1.734375 "})))};t.p;function y(){return(y=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var x=function(e){return r.a.createElement("svg",y({xmlnsXlink:"http://www.w3.org/1999/xlink",width:"16pt",height:"16pt",viewBox:"0 0 16 16",version:1.1},e),r.a.createElement("g",{id:"surface1"},r.a.createElement("path",{style:{stroke:"none",fillRule:"evenodd",fillOpacity:1},d:"M 1.5625 4.109375 L 1.5625 6.761719 L 2.613281 6.761719 L 2.613281 3.757812 L 6.71875 7.351562 C 8.976562 9.328125 10.851562 10.96875 10.882812 10.992188 L 10.9375 11.042969 L 10.9375 5.738281 L 9.886719 5.738281 L 9.886719 8.742188 L 5.78125 5.148438 C 3.523438 3.171875 1.648438 1.53125 1.617188 1.507812 L 1.5625 1.457031 L 1.5625 4.109375 "})))};t.p;function O(){return(O=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var N=function(e){return r.a.createElement("svg",O({xmlnsXlink:"http://www.w3.org/1999/xlink",width:"16pt",height:"16pt",viewBox:"0 0 16 16",version:1.1},e),r.a.createElement("g",{id:"surface1"},r.a.createElement("path",{style:{stroke:"none",fillRule:"evenodd",fillOpacity:1},d:"M 1.5625 4.164062 L 1.5625 6.25 L 2.613281 6.25 L 2.613281 3.125 L 7.8125 3.125 L 7.8125 10.425781 L 10.9375 10.425781 L 10.9375 6.25 L 9.886719 6.25 L 9.886719 9.375 L 8.863281 9.375 L 8.855469 5.730469 L 8.851562 2.085938 L 5.207031 2.082031 L 1.5625 2.074219 L 1.5625 4.164062 "})))},k=(t.p,function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).setKnob=function(e){var a=Object(v.a)(Object(v.a)(t)),n=a.handleChange,r=a.props,i=r.min,o=r.max,l=r.step,s=r.color,c=r.initial,u=r.dragResistance,d=r.guideTicks;t.knob=new f.FLReactiveGripDial(e,{min:i,max:o,step:l,color:s,initial:c,dragResistance:u,guideTicks:d||9}),t.knob.addEventListener("change",function(e){n(e.target.value)}),t.val=t.knob.value},t.handleChange=function(e){t.val=e,t.props.onChange(e)},t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this.props,a=e.label,t=e.classes,n=e.wave,i="rgba(0, 0, 0, 0.4)",o=this.val;return r.a.createElement("div",{className:t.wrapper},r.a.createElement("div",{className:t.knob,ref:this.setKnob},n?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:t.sn},r.a.createElement(b,{style:{fill:0===Number(o)?"#4ecca3":i}})),r.a.createElement("span",{className:t.tr},r.a.createElement(C,{style:{fill:1===Number(o)?"#4ecca3":i}})),r.a.createElement("span",{className:t.sw},r.a.createElement(x,{style:{fill:2===Number(o)?"#4ecca3":i}})),r.a.createElement("span",{className:t.sq},r.a.createElement(N,{style:{fill:3===Number(o)?"#4ecca3":i}}))):r.a.createElement("span",{className:t.val},o)),r.a.createElement("div",{className:t.label},a))}}]),a}(n.Component)),E=p()({wrapper:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",userSelect:"none",fontSize:".8rem",fontVariantNumeric:"tabular-nums"},label:{marginTop:4},knob:{width:"4rem",height:"4rem",position:"relative","& > span":{position:"absolute","& path":{fill:"inherit"}}},val:{color:"#4ecca3",position:"relative",top:-12,left:-8},sn:{bottom:-12,left:-8},tr:{top:-4,left:-8},sw:{top:-4,right:-11},sq:{bottom:-12,right:-13}})(k),L=window.maximJs,j={81:261.63,87:293.66},F=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={osc:new L.maxiOsc,lfo:new L.maxiOsc,wave:null},t.waveNames=["sinewave","triangle","sawn","square"],t.initialFreq=171,t.initialMix=.2,t.initialLFOFreq=1,t.handleWaveChange=function(e){var a=t.waveNames[e],n=t.state.osc[a];t.props.onWaveChange(n.bind(t.state.osc),a,t.props.index)},t.handleLFOWaveChange=function(e){var a=t.waveNames[e],n=t.state.lfo[a];t.props.onLFOWaveChange(n.bind(t.state.lfo),a,t.props.index)},t.handleFreqChange=function(e){t.props.onFreqChange(e,t.props.index)},t.handleLFOFreqChange=function(e){t.props.onLFOFreqChange(e,t.props.index)},t.handleMixChange=function(e){t.props.onMixChange(e,t.props.index)},t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this.waveNames[0],a=this.state.osc[e],t=this.waveNames[0],n=this.state.lfo[e];this.setState({wave:a},this.props.onOscSet(a.bind(this.state.osc),e,this.initialFreq,this.initialMix,n.bind(this.state.lfo),t,this.initialLFOFreq))}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.module},r.a.createElement(E,{initial:0,min:0,max:3,step:1,label:"Wave",guideTicks:this.waveNames.length,wave:!0,color:"#4ecca3",dragResistance:100,onChange:this.handleWaveChange}),r.a.createElement(E,{initial:this.initialFreq,min:0,max:600,step:1,label:"Frequency",color:"#4ecca3",dragResistance:200,onChange:this.handleFreqChange}),r.a.createElement(E,{initial:0,min:0,max:3,step:1,label:"LFO",color:"#4ecca3",dragResistance:100,wave:!0,guideTicks:this.waveNames.length,onChange:this.handleLFOWaveChange}),r.a.createElement(E,{initial:this.initialLFOFreq,min:0,max:300,step:1,label:"LFO Frequency",color:"#4ecca3",dragResistance:200,onChange:this.handleLFOFreqChange}),r.a.createElement(E,{initial:this.initialMix,min:0,max:.3,step:.01,label:"Mix",color:"#4ecca3",dragResistance:200,onChange:this.handleMixChange}))}}]),a}(n.Component),q=p()({module:{backgroundColor:"#393e46",color:"#eeeeee",flex:"1 0 8rem",justifyContent:"space-around",alignItems:"center",display:"flex",borderRadius:"0.5rem",padding:"1rem",boxShadow:"0 1px 5px rgba(0, 0, 0, 0.46)",margin:"0.5rem 0"}})(F),M=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={},t.setCanvasRef=function(e){t.canvas=e,t.context=e.getContext("2d")},t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this.canvas,a=this.context,t=e.getBoundingClientRect().width,n=t/4;e.width=t,e.height=n,a.strokeStyle="#4ecca3",a.fillStyle="#4ecca3";var r=t/1024;!function e(){if(a.clearRect(0,0,t,n),window.drawOutput)for(var i=0;i<1024;i++)a.beginPath(),a.moveTo(i*r,n/2),a.lineTo(i*r,n/2+window.drawOutput[i]*n),a.stroke(),a.closePath();requestAnimationFrame(e)}()}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement("canvas",{ref:this.setCanvasRef,className:e.canvas}))}}]),a}(n.Component),S=p()({canvas:{marginTop:"2rem",width:"100%"}})(M),R=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).handleClick=function(e){t.props.onChange(e)},t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.classes,n=a.tabs,i=a.value;return r.a.createElement("div",{className:t.switch},n.map(function(a,n){return r.a.createElement("div",{key:n,className:"".concat(t.tab," ").concat(i===a?t.active:""),onClick:e.handleClick.bind(e,a)},a)}))}}]),a}(n.Component),A=p()({switch:{display:"flex",justifyContent:"center"},tab:{cursor:"pointer",color:"#eeeeee",textAlign:"center",borderRadius:"0.5rem",margin:"2rem 0.5rem",border:"1px solid #393e46",padding:"1rem 2rem",boxShadow:"0 1px 5px rgba(0, 0, 0, 0.46)",userSelect:"none","&:hover":{boxShadow:"0 1px 3px rgba(78, 204, 163, 0.46)"}},active:{boxShadow:"0 1px 3px rgba(78, 204, 163, 0.46)"}})(R),W=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object(u.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).state={modules:[],modulesNumber:0,mode:"tweak"},t.modes=["tweak","play"],t.notesModulesMap={},t.handleKeyDown=function(e){var a=t.state,n=a.modules,r=a.modulesNumber,i=t.notesModulesMap;if(r>0){var o=e.keyCode,l=j[o];if(l&&void 0===i[l])for(var s in n)if(0===n[s].play||void 0===n[s].play)return i[l]=s,void t.handleNoteChange(l,1,s)}},t.handleKeyUp=function(e){var a=t.state.modulesNumber,n=t.notesModulesMap;if(a>0){var r=e.keyCode,i=j[r];if(i&&void 0!==n[i]){var o=n[i];t.handleNoteChange(0,0,o),n[i]=void 0}}},t.handleModeChange=function(e){e!==t.state.mode&&("tweak"===e?t.state.modules.forEach(function(e,a){return t.handleNoteChange(171,1,a)}):"play"===e&&t.state.modules.forEach(function(e,a){return t.handleNoteChange(0,0,a)}),t.setState({mode:e}))},t.handleNoteChange=function(e,a,n){var r=Object(l.a)(t.state.modules);r[n].freq=Number(e),r[n].play=Number(a),t.setState({modules:r})},t.addModule=function(){0===t.state.modulesNumber&&t.setUpAudio(),t.setState({modulesNumber:t.state.modulesNumber+1})},t.setUpAudio=function(){t.audio||(window.drawOutput=[],t.audio=new L.maxiAudio,t.audio.init(),t.audio.play=function(){this.output=0})},t.handleOscSet=function(e,a,n,r,i,o,s){var c=Object(l.a)(t.state.modules);c.push({wave:e,waveName:a,freq:n,mix:r,lfo:i,lfoName:o,lfoFreq:s,play:0}),t.setState({modules:c})},t.handleWaveChange=function(e,a,n){var r=Object(l.a)(t.state.modules),i=r[n];i.waveName!==a&&(i.wave=e,i.waveName=a,t.setState({modules:r}))},t.handleFreqChange=function(e,a){var n=Object(l.a)(t.state.modules);n[a].freq=Number(e),t.setState({modules:n})},t.handleLFOFreqChange=function(e,a){var n=Object(l.a)(t.state.modules);n[a].lfoFreq=Number(e),t.setState({modules:n})},t.handleMixChange=function(e,a){var n=Object(l.a)(t.state.modules);n[a].mix=Number(e),t.setState({modules:n})},t.handleLFOWaveChange=function(e,a,n){var r=Object(l.a)(t.state.modules),i=r[n];i.lfoName!==a&&(i.lfo=e,i.lfoName=a,t.setState({modules:r}))},t}return Object(h.a)(a,e),Object(c.a)(a,[{key:"render",value:function(){var e=this,a=this.props.classes,t=this.state.modulesNumber,n=t>0?"Add module":"Start tweaking";return r.a.createElement("div",{className:a.app},r.a.createElement(S,null),t>0?r.a.createElement(A,{value:this.state.mode,onChange:this.handleModeChange,tabs:this.modes}):null,r.a.createElement("div",{className:a.container},Array.apply(null,Array(t)).map(function(a,t){return r.a.createElement(q,{key:t,index:t,onOscSet:e.handleOscSet,onWaveChange:e.handleWaveChange,onFreqChange:e.handleFreqChange,onLFOFreqChange:e.handleLFOFreqChange,onLFOWaveChange:e.handleLFOWaveChange,onMixChange:e.handleMixChange})}),r.a.createElement("div",{className:a.addButton,onClick:this.addModule},n)))}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp)}},{key:"componentDidUpdate",value:function(e,a){var t=this.state,n=t.modules,r=t.modulesNumber,i=t.mode;if(n!==a.modules){var o,l,s,c,u,d,h,m=r,p=0,v=0;this.audio&&("tweak"===i?this.audio.play=function(){if(v++,p=0,m>0){for(var e=0;e<m;e++)o=n[e],l=o.wave,s=o.freq,u=o.lfo,d=o.lfoFreq,c=o.mix,p+=l(s)*u(d)*c;this.output=p/m*2*.6,window.drawOutput[v%1024]=p/m*2}}:"play"===i&&(this.audio.play=function(){if(v++,p=0,m>0){for(var e=0;e<m;e++)o=n[e],l=o.wave,s=o.freq,u=o.lfo,d=o.lfoFreq,c=o.mix,h=o.play,p+=l(s)*u(d)*c*h;this.output=p/m*2*.6,window.drawOutput[v%1024]=p/m*2}}))}}}]),a}(n.Component),D=p()({app:{},container:{margin:"0 auto",maxWidth:"900px",display:"flex",flexDirection:"column"},addButton:{cursor:"pointer",color:"#eeeeee",textAlign:"center",borderRadius:"0.5rem",marginTop:"2rem",border:"1px solid #393e46",padding:"1rem 2rem",boxShadow:"0 1px 5px rgba(0, 0, 0, 0.46)",userSelect:"none","&:hover":{boxShadow:"0 1px 3px rgba(78, 204, 163, 0.46)"}}})(W);o.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[37,2,1]]]);
//# sourceMappingURL=main.2fa09c21.chunk.js.map